import{y as V,z as f,A as _,d as M,k as E,F as P,o as H,G as I,H as B,I as t,R as D,J as F,K as y,D as p,L as S,C as d,M as L,N as O,r as w,O as G,P as j,E as x,B as g,q as J}from"#entry";import{c as K,u as U,a as Q,_ as R,b as A,d as q,e as W,f as X,g as T,V as z}from"./bWt-43M8.js";const Y={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"};function Z(v,a){return f(),V("svg",Y,[...a[0]||(a[0]=[_("path",{d:"M96.612 42.497c-18.968 5.917-34.569 17.942-44.901 33.727l-.196.318c-7.218 11.838-11.484 26.167-11.484 41.485 0 13.731 3.436 26.668 9.487 37.986l-.207-.438c2.711 4.623 70.707 74.016 178.667 182.08l174.249 174.444-174.249 174.552C119.413 795.216 52.023 863.913 49.311 868.633c-5.781 11.088-9.175 24.22-9.175 38.138 0 9.871 1.704 19.335 4.835 28.129l-.183-.586c8.518 20.444 24.447 36.374 44.346 44.693l.543.206c8.208 2.948 17.674 4.651 27.545 4.651 13.917 0 27.051-3.393 38.604-9.395l-.466.217c4.72-2.711 73.417-70.101 181.982-178.667L511.894 621.77l174.444 174.249c108.06 107.96 177.457 175.955 182.08 178.667 11.239 5.871 24.536 9.307 38.642 9.307 6.773 0 13.364-.797 19.677-2.292l-.574.115c22.57-6.212 40.714-21.654 50.416-41.913l.207-.473c4.538-9.77 7.186-21.214 7.186-33.28 0-13.364-3.251-25.971-9.001-37.072l.207.444c-2.106-4.417-63.868-67.39-178.461-182.08l-175.145-175.35L795.821 337.54c109.667-109.667 175.851-177.262 178.565-181.982 7.432-13.059 10.045-25.611 9.138-42.881a56.7 56.7 0 0 0-6.872-28.222l.148.298c-7.933-16.575-20.981-29.636-37.085-37.358l-.471-.207c-9.683-4.551-21.034-7.208-32.997-7.208-13.859 0-26.882 3.568-38.213 9.824l.407-.207c-4.72 2.711-72.305 68.892-182.08 178.565L511.917 402.411 337.473 228.162C227.201 118.096 160.113 52.311 155.393 49.597c-11.299-5.987-24.692-9.495-38.911-9.495-7.047 0-13.888.857-20.428 2.489l.578-.122z"},null,-1)])])}const ee={render:Z},oe={key:0,class:"modal__header"},te={class:"modal__header-inner"},le={class:"modal__main"},ae=M({__name:"Modal",props:{modelValue:{default:!1},contentClass:{default:void 0},loading:{type:Boolean}},emits:["update:modelValue","modal:close"],setup(v,{emit:a}){const u=a,i=v,l=E({get(){return i.modelValue},set(e){u("update:modelValue",e)}}),C=E(()=>[{"is-loading":i.loading}]),h=()=>{u("modal:close")},m=((e,n)=>{let s=null;return function(...b){s||(s=setTimeout(()=>{e(...b),clearTimeout(s),s=null},n))}})(()=>{if(l.value){const e=document.querySelector(".modal");if(e){e.style.removeProperty("top"),e.style.removeProperty("max-height");const n=e.querySelector(".modal__body"),s=e.getBoundingClientRect(),c=window?.visualViewport?.height;e.style.maxHeight=`${c}px`,e.style.top=window?.visualViewport?.height!==window?.innerHeight?`${Math.abs(s?.top)}px`:"0",n.style.removeProperty("height"),n.style.removeProperty("max-height")}}},50);return P(()=>i.modelValue,e=>{e?document.documentElement.classList.add("is-overlay"):document.documentElement.classList.remove("is-overlay")}),H(()=>{window.visualViewport&&(window.visualViewport.addEventListener("resize",m),window.addEventListener("scroll",m))}),I(()=>{document.documentElement.classList.remove("is-overlay"),window.visualViewport&&(window.visualViewport.removeEventListener("resize",m),window.removeEventListener("scroll",m))}),(e,n)=>(f(),B(t(D),{modelValue:t(l),"onUpdate:modelValue":n[0]||(n[0]=s=>y(l)?l.value=s:null),teleportTo:"body",class:F(["modal",t(C)]),contentClass:["modal__body",v.contentClass],reserveScrollBarGap:!1,overlayTransition:"vfm-fade",contentTransition:"vfm-fade",onClosed:h},{default:p(()=>[_("div",{class:"modal__close",onClick:h},[d(t(ee),{class:"modal__close-icon"})]),e.$slots.header?(f(),V("div",oe,[_("div",te,[L(e.$slots,"header")])])):S("",!0),_("div",le,[L(e.$slots,"default")])]),_:3},8,["modelValue","class","contentClass"]))}}),se={key:0,class:"auth-modal__form-error"},ne=M({__name:"AuthModal",setup(v){K({validateOnChange:!0,validateOnModelUpdate:!1});const{isAuthModalOpened:a,user:u}=O(U()),i=w(),l=w(!1),C=()=>{a.value=!1},{errors:h,defineField:$,setErrors:m,validate:e}=Q({validationSchema:W(()=>X({name:T().required("Це поле обов'язкове для заповлення").matches(z.lettersOnly,"Введіть коректне ім'я"),phone:T().required("Це поле обов'язкове для заповлення").matches(z.phone,"Введіть коректний номер телефону")})),initialValues:{name:"",phone:""}}),[n]=$("name"),[s]=$("phone"),c=w(null),b=()=>{i.value?.inputRef&&setTimeout(()=>i.value?.inputRef?.focus(),10)},N=async()=>{const{valid:k}=await e();if(k)try{l.value=!0;const o=w([]);o.value=await $fetch("https://jsonplaceholder.typicode.com/users",{method:"GET",headers:{"Content-Type":"application/json"}}),u.value=o.value.find(r=>r.name===n.value&&r.phone===s.value),u.value?(l.value=!1,a.value=!1,J("/customer")):c.value="Дані про цього користувача відсутні",l.value=!1}catch{c.value="Дані про цього користувача відсутні"}};return G(()=>{a.value&&i.value?.inputRef&&b()}),(k,o)=>(f(),B(ae,{modelValue:t(a),"onUpdate:modelValue":o[4]||(o[4]=r=>y(a)?a.value=r:null),contentClass:["auth-modal"],loading:t(l),"onModal:close":C},{header:p(()=>[...o[5]||(o[5]=[x(g("Вхід"),-1)])]),default:p(()=>[_("form",{class:"auth-modal__form",onSubmit:j(N,["prevent"])},[d(R,{name:"name",label:"Ім'я",block:"",error:t(h).name,class:"auth-modal__form-item"},{default:p(()=>[d(A,{ref_key:"nameRef",ref:i,id:"name",size:"lg",placeholder:"Введіть ім'я",modelValue:t(n),"onUpdate:modelValue":o[0]||(o[0]=r=>y(n)?n.value=r:null),inputmode:"text",modelModifiers:{trim:!0},onInput:o[1]||(o[1]=r=>t(m)({name:void 0}))},null,8,["modelValue"])]),_:1},8,["error"]),d(R,{block:"",name:"phone",label:"Введіть номер телефону",error:t(h).phone,class:"auth-modal__form-item"},{default:p(()=>[d(A,{modelValue:t(s),"onUpdate:modelValue":o[2]||(o[2]=r=>y(s)?s.value=r:null),id:"phone",type:"tel",inputmode:"tel",size:"lg",placeholder:"Номер телефону",disabled:t(l),onInput:o[3]||(o[3]=r=>t(m)({phone:void 0}))},null,8,["modelValue","disabled"])]),_:1},8,["error"]),d(q,{type:"submit",variant:"primary",block:"",size:"lg",loading:t(l),disabled:t(l)},{default:p(()=>[...o[6]||(o[6]=[x(g("Вхід"),-1)])]),_:1},8,["loading","disabled"]),t(c)?(f(),V("p",se,g(t(c)),1)):S("",!0)],32)]),_:1},8,["modelValue","loading"]))}}),re={class:"main"},ue=M({__name:"index",setup(v){const{isAuthModalOpened:a}=O(U()),u=()=>{a.value=!0};return(i,l)=>(f(),V("div",re,[d(q,{size:"xl",class:"main__button",onClick:u},{default:p(()=>[...l[0]||(l[0]=[x(g("Вхід"),-1)])]),_:1}),d(ne)]))}});export{ue as default};
